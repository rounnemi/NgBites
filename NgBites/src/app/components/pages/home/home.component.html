<app-search></app-search>
<app-tags></app-tags>
<div class="home-container">
  <div class="most-ordered">
    <h2>üî• Les plus command√©s</h2>
    <ul>
      @for (food of mostOrdered; track food) {
        <li>
          <a routerLink="/food/{{food.id}}">
            <img src="{{food.imageUrl}}" alt="{{food.name}}" />
            <div class="content">
              <div class="name">{{food.name}}</div>
              <div class="price">{{food.price | currency}}</div>
            </div>
          </a>
        </li>
      }
    </ul>
  </div>

  <div class="menu-du-jour">
    <h2>üìå Menu du Jour</h2>
    <div class="carousel">
      <div class="carousel-inner">
        @for (food of todayMenu; track food) {
          <div class="carousel-item">
            <a routerLink="/food/{{food.id}}">
              <img src="{{food.imageUrl}}" alt="{{food.name}}" />
              <div class="content">
                <div class="name">{{food.name}}</div>
                <div class="price">{{food.price | currency}}</div>
              </div>
            </a>
          </div>
        }
      </div>
    </div>
  </div>
</div>
<h2>üîç Explorer Tous les Plats</h2>

@defer {
  <ul class="food-list">
    @for (food of foods.slice(0, 10); track food) {  
      <li>
        <a routerLink="/food/{{food.id}}">
          <img src="{{food.imageUrl}}" alt="{{food.name}}" loading="lazy"/>
          <div class="content">
            <div class="name">{{food.name}}</div>
            <span class="favorite {{food.favorite?'':'not'}}">‚ù§</span>
            <div class="product-item-footer">
              <div class="origins">
                @for (origin of food.origins; track origin) {
                  <span>{{origin}}</span>
                }
              </div>
              <div class="cook-time">
                <span>üïí</span>
                {{food.cookTime}}
              </div>
            </div>
            <div class="price">
              <span>{{food.price | currency}}</span>
            </div>
          </div>
        </a>
      </li>
    }
  </ul>

  <button class="load-more-btn" (click)="loadMore()" *ngIf="foods.length > visibleFoods.length">
    Charger plus üîΩ
  </button>
  
} @placeholder {
  <p>Chargement des plats...</p>
} @loading {
  <p>Encore un instant...</p>
} @error {
  <p>Une erreur est survenue. Veuillez r√©essayer.</p>
}
